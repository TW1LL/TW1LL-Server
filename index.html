<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
    <ul id="users"></ul>
    <hr>
    <ul id="messages"></ul>
    <input type="text" id="sendTo">
    <input type="text" id="message"/>
    <button id="submit">Submit</button>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var user = {};
        var users = {};
        var socket = io();
        addEventListener("load", function(){
            socket.emit("identifier", "bogus identifier");
        });
        addEventListener("DOMContentLoaded", function(){
            document.getElementById("submit").addEventListener("click", sendMsg);
            var userList = document.getElementsByClassName("sendTo");
            for(var i in userList) {
                userList[i].addEventListener("click", sendTo);
            }
        });

        function sendTo(event) {
            document.getElementById("sendTo").value;
        }
        function sendMsg(){
            var textbox = document.getElementById("message");
            var text = textbox.value;
            var message = {


            };
            socket.emit("message send", msg);
            textbox.value = "";
            var li = document.createElement("li");
            var text = document.createTextNode("<" + user.name + "> " + message.text);
            li.appendChild(text);
        }
        socket.on("user data", function(user) {
            user = user;
            console.log(user);
        });
        socket.on("user new", function(user) {
            users[user.id] = user;
            var li = document.createElement("li");
            li.setAttribute("id", user.id);
            li.innerHTML = '<a href="#" class="user">' + user.name + '</a>';
            document.getElementById("users").appendChild(li);

        });
        socket.on("message receive", function(message) {
            var li = document.createElement("li");
            var text = document.createTextNode("<" + message.from + "> " + message.text);
            li.appendChild(text);
            document.getElementById("messages").appendChild(li);
        });
    </script>
</body>
</html>
